# =====================================================
# FMCG Sales Analytics Catalog
# Generated from Cube.js metadata
# Version: 1.0
# =====================================================

metadata:
  version: "1.0"
  last_updated: "2024-01-26"
  description: "FMCG distribution sales analytics catalog"
  cube_endpoint: "http://localhost:4000"

# =====================================================
# METRICS (Measures)
# =====================================================
metrics:
  # Sales Fact Metrics (PRIMARY - Most Important)
  - id: sales_fact.count
    name: transaction_count
    display_name: "Transaction Count"
    description: "Total number of sales transactions/invoices"
    cube: sales_fact
    type: count
    format: number
    business_context: "Use for counting invoices, orders, or transaction volume across primary, secondary, and tertiary sales"
    examples:
      - "how many transactions"
      - "number of sales"
      - "total invoices"
      - "count of orders"
    aliases:
      - "number of sales"
      - "transaction count"
      - "invoice count"
      - "order count"
      - "sales count"
    priority: high
    
  - id: sales_fact.quantity
    name: total_quantity
    display_name: "Total Quantity Sold"
    description: "Sum of all units/pieces sold across all transactions"
    cube: sales_fact
    type: sum
    format: number
    business_context: "Total volume of products sold measured in units/pieces"
    examples:
      - "total units sold"
      - "how many pieces"
      - "volume sold"
      - "quantity"
    aliases:
      - "units sold"
      - "volume"
      - "quantity"
      - "pieces sold"
      - "total units"
    priority: high
    
  # Distributor Metrics
  - id: distributors.count
    name: distributor_count
    display_name: "Distributor Count"
    description: "Total number of distributors"
    cube: distributors
    type: count
    format: number
    business_context: "Count of unique distributors in the network"
    examples:
      - "how many distributors"
      - "number of distributors"
      - "distributor count"
    aliases:
      - "number of distributors"
      - "distributor count"
    priority: medium
    
  # Outlet Metrics
  - id: outlets.count
    name: outlet_count
    display_name: "Outlet Count"
    description: "Total number of retail outlets/stores"
    cube: outlets
    type: count
    format: number
    business_context: "Count of retail points of sale including Kirana, Modern Trade, Pharmacy, etc."
    examples:
      - "how many outlets"
      - "number of stores"
      - "retailer count"
    aliases:
      - "number of outlets"
      - "store count"
      - "retailer count"
      - "outlet count"
    priority: medium
    
  # SKU Metrics
  - id: skus.count
    name: sku_count
    display_name: "SKU Count"
    description: "Total number of unique product SKUs"
    cube: skus
    type: count
    format: number
    business_context: "Count of unique product varieties in the portfolio"
    examples:
      - "how many products"
      - "number of SKUs"
      - "product count"
    aliases:
      - "number of products"
      - "product count"
      - "SKU count"
    priority: medium
    
  # Territory Metrics
  - id: territories.count
    name: territory_count
    display_name: "Territory Count"
    description: "Total number of sales territories"
    cube: territories
    type: count
    format: number
    business_context: "Count of geographic sales territories"
    examples:
      - "how many territories"
      - "number of territories"
    aliases:
      - "territory count"
    priority: low

# =====================================================
# DIMENSIONS (Grouping/Filtering Fields)
# =====================================================
dimensions:
  # Sales Type (CRITICAL)
  - id: sales_fact.sales_type
    name: sales_type
    display_name: "Sales Type"
    description: "Type of sale in the distribution chain"
    cube: sales_fact
    type: string
    business_context: "PRIMARY = Company to Distributor, SECONDARY = Distributor to Outlet, TERTIARY = Outlet to End Consumer"
    possible_values:
      - value: "PRIMARY"
        label: "Primary Sales"
        description: "Company to Distributor"
      - value: "SECONDARY"
        label: "Secondary Sales"
        description: "Distributor to Outlet"
      - value: "TERTIARY"
        label: "Tertiary Sales"
        description: "Outlet to Consumer"
    examples:
      - "primary sales"
      - "secondary sales"
      - "tertiary sales"
      - "sales channel"
    aliases:
      - "channel type"
      - "sales channel"
      - "distribution level"
      - "sales stage"
    priority: high
    filterable: true
    groupable: true
    
  # Credit vs Cash
  - id: sales_fact.is_credit
    name: is_credit_sale
    display_name: "Is Credit Sale"
    description: "Whether the sale was on credit or cash"
    cube: sales_fact
    type: boolean
    business_context: "Distinguishes between credit transactions and cash transactions"
    possible_values:
      - value: true
        label: "Credit"
      - value: false
        label: "Cash"
    examples:
      - "credit sales"
      - "cash sales"
      - "on credit"
    aliases:
      - "payment type"
      - "credit or cash"
    priority: medium
    filterable: true
    groupable: true
    
  # Product Dimensions
  - id: skus.brand
    name: brand
    display_name: "Brand"
    description: "Product brand name"
    cube: skus
    type: string
    business_context: "Brand classification for product analysis"
    examples:
      - "by brand"
      - "FreshCo Cola sales"
      - "NatureFresh performance"
    aliases:
      - "brand name"
      - "product brand"
    priority: high
    filterable: true
    groupable: true
    
  - id: skus.category
    name: product_category
    display_name: "Product Category"
    description: "High-level product category"
    cube: skus
    type: string
    business_context: "Top-level product classification (Beverages, Snacks, Dairy)"
    possible_values:
      - value: "Beverages"
        label: "Beverages"
      - value: "Snacks"
        label: "Snacks"
      - value: "Dairy"
        label: "Dairy"
    examples:
      - "by category"
      - "beverage sales"
      - "snacks performance"
    aliases:
      - "category"
      - "product category"
      - "product type"
    priority: high
    filterable: true
    groupable: true
    
  - id: skus.sub_category
    name: product_sub_category
    display_name: "Product Sub-Category"
    description: "Detailed product sub-category"
    cube: skus
    type: string
    business_context: "Detailed product classification within categories"
    examples:
      - "by sub-category"
      - "carbonated drinks"
      - "chips sales"
    aliases:
      - "sub category"
      - "subcategory"
    priority: medium
    filterable: true
    groupable: true
    
  - id: skus.sku_name
    name: product_name
    display_name: "Product Name"
    description: "Full product/SKU name"
    cube: skus
    type: string
    business_context: "Specific product identifier for detailed analysis"
    examples:
      - "Cola 250ml sales"
      - "by product"
    aliases:
      - "product name"
      - "product"
      - "item"
      - "SKU name"
    priority: medium
    filterable: true
    groupable: true
    
  - id: skus.pack_size
    name: pack_size
    display_name: "Pack Size"
    description: "Product package size"
    cube: skus
    type: string
    business_context: "Product size/variant (250ml, 500ml, 1L, 50g, 100g)"
    examples:
      - "by pack size"
      - "500ml sales"
    aliases:
      - "size"
      - "package size"
    priority: medium
    filterable: true
    groupable: true
    
  # Geographic Dimensions
  - id: territories.region
    name: region
    display_name: "Region"
    description: "Geographic region"
    cube: territories
    type: string
    business_context: "Macro geographic division for sales analysis"
    possible_values:
      - value: "North"
        label: "North"
      - value: "South"
        label: "South"
      - value: "East"
        label: "East"
      - value: "West"
        label: "West"
    examples:
      - "by region"
      - "South region sales"
      - "regional performance"
    aliases:
      - "region"
      - "area"
      - "geographic region"
    priority: high
    filterable: true
    groupable: true
    
  - id: territories.state
    name: state
    display_name: "State"
    description: "State or province"
    cube: territories
    type: string
    business_context: "State-level geographic segmentation"
    examples:
      - "by state"
      - "Tamil Nadu sales"
      - "Karnataka performance"
    aliases:
      - "state"
      - "province"
    priority: high
    filterable: true
    groupable: true
    
  - id: territories.zone
    name: zone
    display_name: "Zone"
    description: "Urbanization zone classification"
    cube: territories
    type: string
    business_context: "Classification by urbanization level"
    possible_values:
      - value: "Metro"
        label: "Metro"
        description: "Metropolitan cities"
      - value: "Urban"
        label: "Urban"
        description: "Urban areas"
      - value: "Rural"
        label: "Rural"
        description: "Rural areas"
    examples:
      - "by zone"
      - "metro sales"
      - "rural performance"
    aliases:
      - "zone"
      - "area type"
      - "urbanization"
    priority: medium
    filterable: true
    groupable: true
    
  - id: territories.territory_name
    name: territory_name
    display_name: "Territory Name"
    description: "Specific sales territory name"
    cube: territories
    type: string
    business_context: "Individual territory for granular analysis"
    examples:
      - "by territory"
      - "Chennai Central"
    aliases:
      - "territory"
    priority: medium
    filterable: true
    groupable: true
    
  # Channel/Outlet Dimensions
  - id: outlets.outlet_type
    name: outlet_type
    display_name: "Outlet Type"
    description: "Type of retail outlet"
    cube: outlets
    type: string
    business_context: "Retail channel classification"
    possible_values:
      - value: "Kirana"
        label: "Kirana"
        description: "Traditional mom-and-pop stores"
      - value: "Modern Trade"
        label: "Modern Trade"
        description: "Organized retail/supermarkets"
      - value: "Institution"
        label: "Institution"
        description: "Institutional sales"
      - value: "Pharmacy"
        label: "Pharmacy"
        description: "Pharmacy/medical stores"
    examples:
      - "by outlet type"
      - "kirana sales"
      - "modern trade performance"
    aliases:
      - "channel"
      - "retail type"
      - "store type"
      - "outlet channel"
    priority: high
    filterable: true
    groupable: true
    
  - id: outlets.outlet_name
    name: outlet_name
    display_name: "Outlet Name"
    description: "Specific outlet/store name"
    cube: outlets
    type: string
    business_context: "Individual outlet identifier"
    examples:
      - "by outlet"
      - "Metro Supermarket sales"
    aliases:
      - "store name"
      - "retailer name"
    priority: low
    filterable: true
    groupable: true
    
  - id: outlets.beat_code
    name: beat_code
    display_name: "Beat Code"
    description: "Sales beat/route code"
    cube: outlets
    type: string
    business_context: "Sales route or beat assignment for field force management"
    examples:
      - "by beat"
      - "beat-wise sales"
    aliases:
      - "beat"
      - "route"
      - "sales route"
    priority: low
    filterable: true
    groupable: true
    
  # Distributor Dimensions
  - id: distributors.distributor_name
    name: distributor_name
    display_name: "Distributor Name"
    description: "Distributor company name"
    cube: distributors
    type: string
    business_context: "Individual distributor identifier"
    examples:
      - "by distributor"
      - "Chennai Beverages sales"
    aliases:
      - "distributor"
    priority: medium
    filterable: true
    groupable: true
    
  - id: distributors.distributor_type
    name: distributor_type
    display_name: "Distributor Type"
    description: "Type/classification of distributor"
    cube: distributors
    type: string
    business_context: "Distributor channel classification"
    possible_values:
      - value: "Super Stockist"
        label: "Super Stockist"
        description: "Large volume distributor"
      - value: "C&F Agent"
        label: "C&F Agent"
        description: "Carrying & Forwarding agent"
      - value: "Regular"
        label: "Regular"
        description: "Standard distributor"
    examples:
      - "by distributor type"
      - "super stockist sales"
    aliases:
      - "distributor channel"
      - "distributor category"
    priority: medium
    filterable: true
    groupable: true
    
  # Sales Rep
  - id: sales_fact.sales_rep_code
    name: sales_rep
    display_name: "Sales Representative"
    description: "Sales person/representative code"
    cube: sales_fact
    type: string
    business_context: "Individual sales person identifier for performance tracking"
    examples:
      - "by sales rep"
      - "SR-001 performance"
    aliases:
      - "sales person"
      - "salesperson"
      - "rep"
      - "sales representative"
    priority: medium
    filterable: true
    groupable: true
    
  # Invoice Number (for filtering only)
  - id: sales_fact.invoice_number
    name: invoice_number
    display_name: "Invoice Number"
    description: "Unique invoice identifier"
    cube: sales_fact
    type: string
    business_context: "Transaction identifier for lookup"
    priority: low
    filterable: true
    groupable: false

# =====================================================
# TIME DIMENSIONS
# =====================================================
time_dimensions:
  - id: sales_fact.invoice_date
    name: invoice_date
    display_name: "Invoice Date"
    description: "Date of the sales transaction"
    cube: sales_fact
    type: time
    business_context: "Primary time dimension for sales trend analysis"
    granularities:
      - name: day
        display_name: "Daily"
        examples: ["daily sales", "by day"]
      - name: week
        display_name: "Weekly"
        examples: ["weekly sales", "by week"]
      - name: month
        display_name: "Monthly"
        examples: ["monthly sales", "by month"]
      - name: quarter
        display_name: "Quarterly"
        examples: ["quarterly sales", "by quarter"]
      - name: year
        display_name: "Yearly"
        examples: ["yearly sales", "by year", "annual"]
    priority: high
    
  - id: date_dim.full_date
    name: calendar_date
    display_name: "Calendar Date"
    description: "Date from date dimension"
    cube: date_dim
    type: time
    priority: low

# =====================================================
# TIME WINDOWS (Pre-defined date ranges)
# =====================================================
time_windows:
  - id: today
    name: today
    display_name: "Today"
    description: "Current day"
    examples: ["today", "today's sales"]
    
  - id: yesterday
    name: yesterday
    display_name: "Yesterday"
    description: "Previous day"
    examples: ["yesterday", "yesterday's sales"]
    
  - id: last_7_days
    name: last_7_days
    display_name: "Last 7 Days"
    description: "Past 7 days including today"
    examples: ["last 7 days", "past week", "last week"]
    aliases: ["past 7 days", "last week", "past week"]
    
  - id: last_30_days
    name: last_30_days
    display_name: "Last 30 Days"
    description: "Past 30 days including today"
    examples: ["last 30 days", "past month", "last month"]
    aliases: ["past 30 days", "last month", "past month"]
    
  - id: last_90_days
    name: last_90_days
    display_name: "Last 90 Days"
    description: "Past 90 days including today"
    examples: ["last 90 days", "past quarter", "last quarter"]
    aliases: ["past 90 days", "last quarter"]
    
  - id: month_to_date
    name: month_to_date
    display_name: "Month to Date"
    description: "From start of current month to today"
    examples: ["month to date", "MTD", "this month so far"]
    aliases: ["MTD", "this month"]
    
  - id: quarter_to_date
    name: quarter_to_date
    display_name: "Quarter to Date"
    description: "From start of current quarter to today"
    examples: ["quarter to date", "QTD", "this quarter so far"]
    aliases: ["QTD", "this quarter"]
    
  - id: year_to_date
    name: year_to_date
    display_name: "Year to Date"
    description: "From start of current year to today"
    examples: ["year to date", "YTD", "this year so far"]
    aliases: ["YTD", "this year"]
    
  - id: last_month
    name: last_month
    display_name: "Last Month"
    description: "Previous complete month"
    examples: ["last month", "previous month"]
    aliases: ["previous month"]
    
  - id: last_quarter
    name: last_quarter
    display_name: "Last Quarter"
    description: "Previous complete quarter"
    examples: ["last quarter", "previous quarter"]
    aliases: ["previous quarter"]
    
  - id: last_year
    name: last_year
    display_name: "Last Year"
    description: "Previous complete year"
    examples: ["last year", "previous year"]
    aliases: ["previous year"]

# =====================================================
# INTENT TYPES (Query patterns)
# =====================================================
intent_types:
  - id: snapshot
    name: snapshot
    display_name: "Snapshot"
    description: "Point-in-time metric value"
    required_fields:
      - metrics
    optional_fields:
      - dimensions
      - filters
      - time_window
    examples:
      - "What are the total sales?"
      - "How many transactions yesterday?"
      - "Show me revenue by region"
      
  - id: trend
    name: trend
    display_name: "Trend Analysis"
    description: "Metric over time"
    required_fields:
      - metrics
      - time_dimension
      - time_grain
    optional_fields:
      - dimensions
      - filters
      - time_window
    examples:
      - "Show sales trend over last 3 months"
      - "Monthly revenue for this year"
      - "Daily transactions last week"
      
  - id: comparison
    name: comparison
    display_name: "Comparison"
    description: "Compare metric across periods or segments"
    required_fields:
      - metrics
      - comparison_type
    optional_fields:
      - dimensions
      - filters
      - time_window
    comparison_types:
      - year_over_year
      - month_over_month
      - week_over_week
      - period_vs_period
    examples:
      - "Compare this month vs last month"
      - "Year over year growth"
      - "Primary vs secondary sales"
      
  - id: ranking
    name: ranking
    display_name: "Ranking/Top-N"
    description: "Ranked list by metric"
    required_fields:
      - metrics
      - dimensions
      - order
      - limit
    optional_fields:
      - filters
      - time_window
    examples:
      - "Top 5 products by revenue"
      - "Bottom 10 territories by sales"
      - "Best performing distributors"
      
  - id: distribution
    name: distribution
    display_name: "Distribution"
    description: "Breakdown by dimension"
    required_fields:
      - metrics
      - dimensions
    optional_fields:
      - filters
      - time_window
    examples:
      - "Sales by region"
      - "Revenue breakdown by category"
      - "Distribution across outlet types"
      
  - id: drill_down
    name: drill_down
    display_name: "Drill Down"
    description: "Hierarchical exploration"
    required_fields:
      - metrics
      - dimensions
    optional_fields:
      - filters
      - time_window
    examples:
      - "Show region, then state, then territory"
      - "Category breakdown with sub-categories"

# =====================================================
# COMPARISON TYPES
# =====================================================
comparison_types:
  - id: yoy
    name: year_over_year
    display_name: "Year over Year"
    description: "Compare same period across years"
    examples: ["YoY", "year over year", "vs last year"]
    
  - id: mom
    name: month_over_month
    display_name: "Month over Month"
    description: "Compare consecutive months"
    examples: ["MoM", "month over month", "vs last month"]
    
  - id: wow
    name: week_over_week
    display_name: "Week over Week"
    description: "Compare consecutive weeks"
    examples: ["WoW", "week over week", "vs last week"]
    
  - id: period_vs_period
    name: period_vs_period
    display_name: "Period vs Period"
    description: "Compare two custom periods"
    examples: ["Q1 vs Q2", "January vs February"]

# =====================================================
# VISUALIZATION TYPES
# =====================================================
visualization_types:
  - id: table
    name: table
    display_name: "Table"
    description: "Tabular data display"
    suitable_for:
      - snapshot
      - ranking
      - distribution
      
  - id: line
    name: line_chart
    display_name: "Line Chart"
    description: "Line chart for trends"
    suitable_for:
      - trend
      - comparison
      
  - id: bar
    name: bar_chart
    display_name: "Bar Chart"
    description: "Bar chart for comparisons"
    suitable_for:
      - ranking
      - distribution
      - comparison
      
  - id: column
    name: column_chart
    display_name: "Column Chart"
    description: "Vertical bar chart"
    suitable_for:
      - trend
      - distribution
      
  - id: pie
    name: pie_chart
    display_name: "Pie Chart"
    description: "Pie chart for distribution"
    suitable_for:
      - distribution
      
  - id: number
    name: number_card
    display_name: "Number Card"
    description: "Single number display"
    suitable_for:
      - snapshot

# =====================================================
# BUSINESS RULES & CONSTRAINTS
# =====================================================
business_rules:
  - id: tertiary_requires_outlet
    description: "Tertiary sales must have outlet dimension"
    condition: "If sales_type = TERTIARY, then outlet dimension required"
    
  - id: primary_no_outlet
    description: "Primary sales don't have outlet"
    condition: "If sales_type = PRIMARY, then outlet is NULL"
    
  - id: max_date_range
    description: "Maximum date range for detailed queries"
    value: 365
    unit: days

# =====================================================
# COMMON QUERY PATTERNS (For training/examples)
# =====================================================
query_patterns:
  - pattern: "total {metric}"
    intent: snapshot
    example: "total sales"
    
  - pattern: "{metric} by {dimension}"
    intent: distribution
    example: "revenue by region"
    
  - pattern: "{metric} over {time_window}"
    intent: trend
    example: "sales over last month"
    
  - pattern: "top {N} {dimension} by {metric}"
    intent: ranking
    example: "top 5 products by revenue"
    
  - pattern: "{metric} {time_window} vs {time_window}"
    intent: comparison
    example: "sales this month vs last month"